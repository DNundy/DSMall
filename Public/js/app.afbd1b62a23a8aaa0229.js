webpackJsonp([1],{"+BTi":function(t,e){},"2Sci":function(t,e){},"2rGO":function(t,e){},"9Det":function(t,e){},DcMh:function(t,e,s){t.exports=s.p+"img/logo_login.a34d1cf.png"},DtgA:function(t,e,s){t.exports=s.p+"img/logo_register.3afb982.png"},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("2rGO"),s("+BTi");var r=s("nu7/"),i=s.n(r),o=s("7+uW"),n=s("mw3O"),a=s.n(n),c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var u=s("VU/8")({name:"App",methods:{},mounted:function(){this.checkLoginStatus()}},c,!1,function(t){s("OZc3")},null,null).exports,l=s("Gu7T"),h=s.n(l),g=s("/ocq"),p={checkLength:function(t,e,s){if("number"!=typeof e||"number"!=typeof s)throw new Error("【validate】: 最小值和最大值应该设为数字！");if(e>s)throw new Error("【validate】: 最小值应该小于最大值！");var r=t.length;return r>=e&&r<=s?{status:!0}:t?r<e?{status:!1,type:-1,msg:"该值长度不能小于"+e+"位"}:r>s?{status:!1,type:-1,msg:"该值长度不能大于"+s+"位"}:void 0:{status:!1,type:1}},checkPhone:function(t){var e=t.length,s=/^[1][3,4,5,7,8][0-9]{9}$/.test(t);return t?11!=e?{status:!1,type:-1,msg:"手机号码一般为11位纯数字"}:s?s?{status:!0}:void 0:{status:!1,type:-1,msg:"手机号码格式好像出错了呢"}:{status:!1,type:-1,msg:"手机号码是必须的哦"}},checkEmail:function(t){var e=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(t);return t?e?e?{status:!0}:void 0:{status:!1,type:-1,msg:"邮箱格式好像出错了呢"}:{status:!1,type:-1,msg:"邮箱是必须的哦"}}},v={setUserInfo:function(t){var e={access_token:t.access_token,refresh_token:t.refresh_token,access_expires:Math.round(new Date/1e3)+3600,refresh_expires:Math.round(new Date/1e3)+604800};localStorage.setItem("auth",a.a.stringify(e))}},f={data:function(){return{loginInfo:{id:"",password:""},error_status:!1,error_text:"欢迎登录趣二手！",error_tips:"欢迎登录趣二手！",submit_text:"立即登录"}},methods:{closeLoginDiv:function(){this.$store.commit("closeLoginDiv"),this.loginInfo.id=this.loginInfo.password="",this.error_status=!1,this.error_tips=this.error_text},toRegister:function(){this.closeLoginDiv(),this.$store.commit("openRegisterDiv")},toForget:function(){this.closeLoginDiv(),this.$store.commit("openForgetDiv")},checkPwd:function(){var t=p.checkLength(this.loginInfo.password,6,16);return t.status?(this.error_status=!1,this.error_tips=this.error_text,!0):(-1==t.type?this.error_tips=t.msg:1==t.type&&(this.error_tips="密码是必须的哦！"),this.error_status=!0,!1)},checkPhone:function(){var t=p.checkPhone(this.loginInfo.id);return t.status?(this.error_status=!1,this.error_tips=this.error_text,!0):(this.error_tips=t.msg,this.error_status=!0,!1)},submitLogin:function(){var t=this;if(this.checkPhone()&&this.checkPwd()){this.submit_text="拼命登陆ing...";var e=a.a.stringify(this.loginInfo);this.$ajax.post("/api/Account/login",e).then(function(e){var s=e.data;0==s.code?t.submitSuccess(s.data):-1==s.code&&(t.error_tips=s.msg,t.error_status=!0),t.submit_text="立即登录"}).catch(function(e){t.submit_text="立即登录"})}},submitSuccess:function(t){this.$store.commit("setUserInfo",t),this.$store.commit("changeLoginStatus",!0),v.setUserInfo(t),this.closeLoginDiv()}},computed:{loginDivStatus:function(){return this.$store.state.loginDivStatus}},mounted:function(){}},d={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.loginDivStatus?r("div",{staticClass:"loginWrap"},[r("div",{staticClass:"loginDiv"},[r("img",{staticClass:"loginLogo",attrs:{src:s("DcMh"),alt:"登录LOGO"}}),t._v(" "),r("div",{staticClass:"loginHead"},[r("span",{staticClass:"loginTitle"},[t._v("登录")]),t._v(" "),r("div",{staticClass:"loginClose",on:{click:t.closeLoginDiv}},[t._v("×")])]),t._v(" "),r("div",{staticClass:"loginCont",on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitLogin(e):null}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginInfo.id,expression:"loginInfo.id"}],attrs:{type:"text",placeholder:"请输入手机号码"},domProps:{value:t.loginInfo.id},on:{keyup:t.checkPhone,input:function(e){e.target.composing||t.$set(t.loginInfo,"id",e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginInfo.password,expression:"loginInfo.password"}],attrs:{type:"password",placeholder:"请输入登录密码"},domProps:{value:t.loginInfo.password},on:{keyup:t.checkPwd,input:function(e){e.target.composing||t.$set(t.loginInfo,"password",e.target.value)}}}),t._v(" "),r("div",{staticClass:"tips",class:{error:t.error_status}},[t._v(t._s(t.error_tips))]),t._v(" "),r("div",{staticClass:"submitBtn",on:{click:t.submitLogin}},[t._v(t._s(t.submit_text))])]),t._v(" "),r("div",{staticClass:"loginFoot"},[r("span",[t._v("没有账号？")]),t._v(" "),r("span",{staticClass:"toRegister",on:{click:t.toRegister}},[t._v("朕要注册")]),t._v(" "),r("span",{staticClass:"forgetPw",on:{click:t.toForget}},[t._v("忘记密码")])])])]):t._e()},staticRenderFns:[]};var m={data:function(){return{registerInfo:{name:"",id:"",email:"",password:""},error_status:!1,error_text:"欢迎注册趣二手！",error_tips:"欢迎注册趣二手！",submit_text:"立即注册"}},methods:{closeRegisterDiv:function(){this.$store.commit("closeRegisterDiv"),this.registerInfo.id=this.registerInfo.name=this.registerInfo.email=this.registerInfo.password="",this.error_status=!1,this.error_tips=this.error_text},toLogin:function(){this.closeRegisterDiv(),this.$store.commit("openLoginDiv")},checkName:function(){var t=p.checkLength(this.registerInfo.name,2,15);return t.status?(this.error_status=!1,this.error_tips=this.error_text,!0):(-1==t.type?this.error_tips=t.msg:1==t.type&&(this.error_tips="昵称是必须的哦！"),this.error_status=!0,!1)},checkPhone:function(){var t=p.checkPhone(this.registerInfo.id);return t.status?(this.error_status=!1,this.error_tips=this.error_text,!0):(this.error_tips=t.msg,this.error_status=!0,!1)},checkEmail:function(){var t=p.checkEmail(this.registerInfo.email);return t.status?(this.error_status=!1,this.error_tips=this.error_text,!0):(this.error_tips=t.msg,this.error_status=!0,!1)},checkPwd:function(){var t=p.checkLength(this.registerInfo.password,6,16);return t.status?(this.error_status=!1,this.error_tips=this.error_text,!0):(-1==t.type?this.error_tips=t.msg:1==t.type&&(this.error_tips="密码是必须的哦！"),this.error_status=!0,!1)},submitRegister:function(){var t=this;if(this.checkName()&&this.checkPhone()&&this.checkEmail()&&this.checkPwd()){this.submit_text="拼命注册ing...";var e=a.a.stringify(this.registerInfo);this.$ajax.post("/api/Account/register",e).then(function(e){var s=e.data;0==s.code?t.submitSuccess(s.data):-1==s.code&&(t.error_tips=s.msg,t.error_status=!0),t.submit_text="立即注册"}).catch(function(e){t.error_tips="一个未知的错误发生了！",t.error_status=!0,t.submit_text="立即注册"})}},submitSuccess:function(t){console.log(t),this.$store.commit("setUserInfo",t),this.$store.commit("changeLoginStatus",!0),v.setUserInfo(t),this.closeRegisterDiv()}},computed:{registerDiv:function(){return this.$store.state.registerDiv}},mounted:function(){}},_={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.registerDiv?r("div",{staticClass:"registerWrap"},[r("div",{staticClass:"registerDiv"},[r("img",{staticClass:"registerLogo",attrs:{src:s("DtgA"),alt:"注册LOGO"}}),t._v(" "),r("div",{staticClass:"registerHead"},[r("span",{staticClass:"registerTitle"},[t._v("注册")]),t._v(" "),r("div",{staticClass:"registerClose",on:{click:t.closeRegisterDiv}},[t._v("×")])]),t._v(" "),r("div",{staticClass:"registerCont",on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.submitRegister(e):null}}},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerInfo.name,expression:"registerInfo.name"}],attrs:{type:"text",placeholder:"请输入用户昵称"},domProps:{value:t.registerInfo.name},on:{keyup:t.checkName,input:function(e){e.target.composing||t.$set(t.registerInfo,"name",e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerInfo.id,expression:"registerInfo.id"}],attrs:{type:"text",placeholder:"请输入手机号码"},domProps:{value:t.registerInfo.id},on:{keyup:t.checkPhone,input:function(e){e.target.composing||t.$set(t.registerInfo,"id",e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerInfo.email,expression:"registerInfo.email"}],attrs:{type:"email",placeholder:"请输入电子邮箱"},domProps:{value:t.registerInfo.email},on:{keyup:t.checkEmail,input:function(e){e.target.composing||t.$set(t.registerInfo,"email",e.target.value)}}}),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.registerInfo.password,expression:"registerInfo.password"}],attrs:{type:"password",placeholder:"请输入登录密码"},domProps:{value:t.registerInfo.password},on:{keyup:t.checkPwd,input:function(e){e.target.composing||t.$set(t.registerInfo,"password",e.target.value)}}}),t._v(" "),r("div",{staticClass:"tips",class:{error:t.error_status}},[t._v(t._s(t.error_tips))]),t._v(" "),r("div",{staticClass:"submitBtn",on:{click:t.submitRegister}},[t._v(t._s(t.submit_text))])]),t._v(" "),r("div",{staticClass:"registerFoot"},[r("span",[t._v("已有账号？")]),t._v(" "),r("span",{staticClass:"toLogin",on:{click:t.toLogin}},[t._v("去登录")])])])]):t._e()},staticRenderFns:[]};var k={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.forgetDiv?r("div",{staticClass:"forgetWrap"},[r("div",{staticClass:"forgetDiv"},[r("img",{staticClass:"forgetLogo",attrs:{src:s("lkxW"),alt:"注册LOGO"}}),t._v(" "),r("div",{staticClass:"forgetHead"},[r("span",{staticClass:"forgetTitle"},[t._v("找回")]),t._v(" "),r("div",{staticClass:"forgetClose",on:{click:t.closeForgetDiv}},[t._v("×")])]),t._v(" "),t._m(0),t._v(" "),r("div",{staticClass:"forgetFoot"},[r("span",{staticClass:"toLogin",on:{click:t.toLogin}},[t._v("返回登录")])])])]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"forgetCont"},[e("input",{attrs:{type:"text",placeholder:"请输入手机号码"}}),this._v(" "),e("input",{attrs:{type:"email",placeholder:"请输入预留邮箱"}}),this._v(" "),e("input",{attrs:{type:"password",placeholder:"请输入新的密码"}}),this._v(" "),e("div",{staticClass:"submitBtn"},[this._v("去找回")])])}]};var D={data:function(){return{}},methods:{openLoginDiv:function(){this.$store.commit("openLoginDiv")},openRegisterDiv:function(){this.$store.commit("openRegisterDiv")},loginOut:function(){this.$store.commit("setUserInfo",{a_id:"",a_name:"",a_auth:"",a_email:"",access_token:"",refresh_token:""}),this.$store.commit("changeLoginStatus",!1),localStorage.removeItem("auth")}},components:{UserLogin:s("VU/8")(f,d,!1,function(t){s("kmtk")},"data-v-7232a798",null).exports,UserRegister:s("VU/8")(m,_,!1,function(t){s("qqRR")},"data-v-7945e60c",null).exports,UserForget:s("VU/8")({data:function(){return{}},methods:{closeForgetDiv:function(){this.$store.commit("closeForgetDiv")},toLogin:function(){this.closeForgetDiv(),this.$store.commit("openLoginDiv")}},computed:{forgetDiv:function(){return this.$store.state.forgetDiv}},mounted:function(){}},k,!1,function(t){s("vP3P")},"data-v-521c758d",null).exports},computed:{userInfo:function(t){return this.$store.state.userInfo},loginStatus:function(t){return this.$store.state.loginStatus}}},w={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"header"},[s("div",{staticClass:"headerWrap"},[t._m(0),t._v(" "),t._m(1),t._v(" "),s("div",{staticClass:"user-info"},[t.loginStatus?s("span",[s("span",[t._v(t._s(t.userInfo.a_name))]),t._v(" "),s("span",{staticClass:"outLogin",on:{click:t.loginOut}},[t._v("  退出")])]):s("span",[s("span",{staticClass:"goLogin",on:{click:t.openLoginDiv}},[t._v("登录")]),t._v(" "),s("span",{staticClass:"goRegister",on:{click:t.openRegisterDiv}},[t._v("  注册")])])]),t._v(" "),s("user-login"),t._v(" "),s("user-register"),t._v(" "),s("user-forget")],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"/"}},[e("span",{staticClass:"headerLogo"},[this._v("趣二手")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"headerList"},[e("a",{staticClass:"active",attrs:{href:""}},[this._v("寻购商品")]),this._v(" "),e("a",{attrs:{href:""}},[this._v("我要出售")]),this._v(" "),e("a",{attrs:{href:""}},[this._v("个人空间")]),this._v(" "),e("a",{attrs:{href:""}},[this._v("关于我们")])])}]};var x={render:function(){var t=this.$createElement;return(this._self._c||t)("div")},staticRenderFns:[]};var C={data:function(){return{}},components:{UserHeader:s("VU/8")(D,w,!1,function(t){s("ukTD")},"data-v-c4304680",null).exports,UserFooter:s("VU/8")({data:function(){return{}}},x,!1,function(t){s("9Det")},"data-v-16aefe12",null).exports}},I={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"indexWrap"},[e("user-header"),this._v(" "),e("user-footer")],1)},staticRenderFns:[]};var y=[{path:"/",name:"index",component:s("VU/8")(C,I,!1,function(t){s("2Sci")},"data-v-b6e47ee0",null).exports}],$={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n    admin\n")])},staticRenderFns:[]};var L=[{path:"/admin",name:"header",component:s("VU/8")({data:function(){return{}}},$,!1,function(t){s("aVNz")},"data-v-4044c854",null).exports}];o.default.use(g.a);var S=new g.a({routes:[].concat(h()(y),h()(L))}),R=s("NYxO");o.default.use(R.a);var b=new R.a.Store({state:{loginDivStatus:!1,registerDiv:!1,forgetDiv:!1,loginStatus:!1,userInfo:{a_id:"",a_name:"",a_email:"",a_auth:"",access_token:"",refresh_token:"",access_expires:"",refresh_expires:""}},getters:{},mutations:{openLoginDiv:function(t){t.loginDivStatus=!0},closeLoginDiv:function(t){t.loginDivStatus=!1},openRegisterDiv:function(t){t.registerDiv=!0},closeRegisterDiv:function(t){t.registerDiv=!1},openForgetDiv:function(t){t.forgetDiv=!0},closeForgetDiv:function(t){t.forgetDiv=!1},setUserInfo:function(t,e){for(var s in e)!0===e.hasOwnProperty(s)&&(t.userInfo[s]=e[s]);t.userInfo.access_expires=Math.round(new Date/1e3)+3600,t.userInfo.refresh_expires=Math.round(new Date/1e3)+604800},changeLoginStatus:function(t,e){t.loginStatus=e}},actions:{}}),P=s("woOf"),F=s.n(P),U=s("//Fk"),E=s.n(U),O=s("mtWM"),T=s.n(O);T.a.interceptors.request.use(function(t){var e=localStorage.getItem("auth");return t.headers={"Content-Type":"application/x-www-form-urlencoded"},e?(e=a.a.parse(e),t.headers.access_token=e.access_token,t.headers.refresh_token=e.refresh_token,t):t},function(t){return E.a.reject(t)}),T.a.interceptors.response.use(function(t){return t},function(t){return E.a.reject(t)});var N=function(t,e){var s={srAppid:""},r={method:t.method,baseURL:"/dsmall",url:t.url,timeout:5e3,params:F()(s,e),data:a.a.stringify(F()(s,e)),headers:"get"==t.method?{"X-Requested-With":"XMLHttpRequest",Accept:"application/json","Content-Type":"application/json; charset=UTF-8"}:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};return"get"==t.method?delete r.data:delete r.params,new E.a(function(t,e){T()(r).then(function(e){!function(t){"-1"==t.data.errCode?Vue.prototype.$msg.alert.show({title:"提示",content:t.data.errDesc||"网络异常",onShow:function(){},onHide:function(){console.log("确定")}}):"000002"!=t.data.errCode&&"000000"!=t.data.errCode&&Vue.prototype.$msg.alert.show({title:"提示",content:t.data.errDesc||"网络异常",onShow:function(){},onHide:function(){console.log("确定")}})}(e),t(e)}).catch(function(t){!function(t){if(t&&(200===t.status||304===t.status||400===t.status))return t;Vue.prototype.$msg.alert.show({title:"提示",content:"网络异常"})}(t),e(t)})})};o.default.prototype.$loading=i.a.service,o.default.prototype.$ajax=N,o.default.config.productionTip=!1,new o.default({el:"#app",router:S,store:b,components:{App:u},template:"<App/>"})},OZc3:function(t,e){},aVNz:function(t,e){},kmtk:function(t,e){},lkxW:function(t,e,s){t.exports=s.p+"img/logo_forget.b12cd6f.png"},qqRR:function(t,e){},ukTD:function(t,e){},vP3P:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.afbd1b62a23a8aaa0229.js.map